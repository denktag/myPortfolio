"use strict";//! slick-carousel
$(document).ready((function(){$(".skills__inner").slick({infinite:!0,slidesToShow:5,slidesToScroll:1,arrows:!1,autoplay:!0,autoplaySpeed:1500,responsive:[{breakpoint:992,settings:{slidesToShow:4}},{breakpoint:768,settings:{slidesToShow:3}}]})})),//! burger-menu
$(document).on("click",".header__burger",(function(e){$(".header__burger, .header__menu").toggleClass("_active")})),$(document).on("click",".footer__burger",(function(e){$(".footer__burger, .footer__menu-list").toggleClass("_active")})),//! Скрыть блок навигации, по клику вне блока
$(document).mouseup((function(e){$(".header__burger").is(e.target)||0!==$(".header__burger").has(e.target).length||$(".header__menu").is(e.target)||0!==$(".header__menu").has(e.target).length||$(".header__burger, .header__menu").removeClass("_active")})),$(window).on("scroll",(function(){$(this).scrollTop()>340&&$(".header__burger, .header__menu").removeClass("_active")})),//! Плавный скрол
$(document).on("click",".header__link",(function(e){e.preventDefault();let t=$(this).attr("href"),n=$(t).offset().top;$("body, html").animate({scrollTop:n},800)})),//! Плавный скролл вверх
$(document).on("click",".scroll-up",(function(e){e.preventDefault(),$("body, html").animate({scrollTop:0},800)}));//! Анимация
const animItems=document.querySelectorAll("._anim-items");if(animItems.length>0){function animOnScroll(){for(let e=0;e<animItems.length;e++){const t=animItems[e],n=t.offsetHeight,o=offset(t).top,s=14;let i=window.innerHeight-n/s;n>window.innerHeight&&(i=window.innerHeight-window.innerHeight/s),pageYOffset>o-i&&pageYOffset<o+n?t.classList.add("_active"):t.classList.contains("_anim-no-hide")||t.classList.remove("_active")}}function offset(e){const t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+o,left:t.left+n}}window.addEventListener("scroll",animOnScroll),animOnScroll()}//! форма обратной связи
//! Определение поддержки браузером формата webp для использования webp в свойстве background-image в scss
function testWebP(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("form");function t(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function n(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function o(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}e.addEventListener("submit",(async function(s){s.preventDefault();let i=function(e){let s=0,i=document.querySelectorAll("._req");//! класс '._req' нужно добавить к тем полям которые мы хотим проверить
for(let e=0;e<i.length;e++){const r=i[e];n(r),r.classList.contains("_email")?o(r)&&(t(r),s++):("checkbox"===r.getAttribute("type")&&!1===r.checked||""===r.value)&&(t(r),s++)}return s}(),r=new FormData(e);if(0===i){e.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:r});if(t.ok){let n=await t.json();alert(n.message),formPreview.innerHTML="",e.reset(),e.classList.remove("_sending")}else alert("Ошибка"),e.classList.remove("_sending")}else alert("Заполните обязательные поля")}))})),testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));